(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{544:function(t,a,n){"use strict";n.r(a);var e=n(6),v=Object(e.a)({},(function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("p",[t._v("关于这个网络面板只重点说一下单个资源的时间线，点击请求，在弹出的面板中选择Timing面板，这个就是时间线面板：")]),t._v(" "),n("h2",{attrs:{id:"queuing"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#queuing"}},[t._v("#")]),t._v(" Queuing")]),t._v(" "),n("p",[t._v("也就是排队的意思，当浏览器发起一个请求的时候，会有很多原因导致该请求不能被立即执行，而是需要排队等待。")]),t._v(" "),n("ul",[n("li",[t._v("首先，页面中的资源是有优先级的，比如 CSS、HTML、JavaScript 等都是页面中的核心文件，所以优先级最高；而图片、视频、音频这类资源就不是核心资源，优先级就比较低。通常当后者遇到前者时，就需要“让路”，进入待排队状态。")]),t._v(" "),n("li",[t._v("其次，我们前面也提到过，chrome浏览器会为每个域名最多维护 6 个 TCP 连接，如果发起一个 HTTP 请求时，这 6 个 TCP 连接都处于忙碌状态，那么这个请求就会处于排队状态。")]),t._v(" "),n("li",[t._v("最后，网络进程在为数据分配磁盘空间时，新的 HTTP 请求也需要短暂地等待磁盘分配结束。")])]),t._v(" "),n("h2",{attrs:{id:"stalled"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#stalled"}},[t._v("#")]),t._v(" Stalled")]),t._v(" "),n("p",[t._v("表示停滞的意思。如果使用了代理服务器，还会增加一个 Proxy Negotiation 阶段，也就是代理协商阶段，它表示代理服务器连接协商所用的时间。")]),t._v(" "),n("h2",{attrs:{id:"connectionstart"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#connectionstart"}},[t._v("#")]),t._v(" connectionStart")]),t._v(" "),n("p",[t._v("接下来就到了 Initial connection/SSL 阶段了，也就是和服务器建立连接的阶段，这包括了建立 TCP 连接所花费的时间；")]),t._v(" "),n("h2",{attrs:{id:"requestsent"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#requestsent"}},[t._v("#")]),t._v(" RequestSent")]),t._v(" "),n("p",[t._v("通常这个阶段非常快，因为只需要把浏览器缓冲区的数据发送出去就结束了。")]),t._v(" "),n("h2",{attrs:{id:"waiting-ttfb"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#waiting-ttfb"}},[t._v("#")]),t._v(" Waiting (TTFB)")]),t._v(" "),n("p",[t._v("数据发送出去了，接下来就是等待接收服务器第一个字节的数据，这个阶段称为 Waiting (TTFB)，通常也称为“"),n("strong",[t._v("第一字节时间")]),t._v("”。 "),n("strong",[t._v("TTFB")]),t._v(" 是反映服务端响应速度的重要指标，对服务器来说，TTFB 时间越短，就说明服务器响应越快。")]),t._v(" "),n("h2",{attrs:{id:"contentdownload"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#contentdownload"}},[t._v("#")]),t._v(" ContentDownload")]),t._v(" "),n("p",[t._v("接收到第一个字节之后，进入陆续接收完整数据的阶段，也就是 Content Download 阶段，这意味着从第一字节时间到接收到全部响应数据所用的时间。")]),t._v(" "),n("h2",{attrs:{id:"优化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#优化"}},[t._v("#")]),t._v(" 优化")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("排队优化")]),t._v(" "),n("p",[t._v("由于"),n("strong",[t._v("一个域名")]),t._v("只能维护6个TCP链接,可以使用域名切片，将请求放到不同域名下，这样就有6n个请求；或者使用HTTP2，因为 HTTP2 已经没有每个域名最多维护 6 个 TCP 连接的限制了。HTTP2支持TCP连接多路复用，也就是一个TCP链接可以同时支持多个请求。")])]),t._v(" "),n("li",[n("p",[t._v("第一字节时间（TTFB）时间过久")]),t._v(" "),n("ul",[n("li",[t._v("服务器生成页面数据的时间过久。对于动态网页来说，服务器收到用户打开一个页面的请求时，首先要从数据库中读取该页面需要的数据，然后把这些数据传入到模板中，模板渲染后，再返回给用户。服务器在处理这个数据的过程中，可能某个环节会出问题。")]),t._v(" "),n("li",[t._v("网络原因（比如服务器带宽太小等）")]),t._v(" "),n("li",[t._v("发送请求头时带上了多余的用户信息。比如一些不必要的 Cookie 信息，服务器接收到这些 Cookie 信息之后可能需要对每一项都做处理，这样就加大了服务器的处理时长。")])]),t._v(" "),n("p",[t._v("对于这三种问题，你要有针对性地出一些解决方案。面对第一种服务器的问题，你可以想办法去提高服务器的处理速度，比如通过增加各种缓存的技术；针对第二种网络问题，你可以使用 CDN 来缓存一些静态文件；至于第三种，你在发送请求时就去尽可能地减少一些不必要的 Cookie 数据信息。")])]),t._v(" "),n("li",[n("p",[t._v("Content Download 时间过长")]),t._v(" "),n("p",[t._v("如果单个请求的 Content Download 花费了大量时间，有可能是字节数太多的原因导致的。这时候你就需要减少文件大小，比如压缩、去掉源码中不必要的注释等方法。")])])])])}),[],!1,null,null,null);a.default=v.exports}}]);